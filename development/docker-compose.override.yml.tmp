---
version: "3.4"
services:
  infrahub-server:
    ports:
      - "8000:8000"
  frontend:
    ports:
      - "3000:3000"

  # --------------------------------------------------------------------------------
  # Uncomment to start a Prometheus Server that will collect all metrics endpoints
  # --------------------------------------------------------------------------------
  # prometheus:
  #   image: prom/prometheus:latest
  #   ports:
  #     - "9090:9090"
  #   volumes:
  #     - type: bind
  #       source: ./prometheus.yml
  #       target: /etc/prometheus/prometheus.yml
  #       read_only: true
  #     - prometheus_data:/prometheus
  #   command:
  #     - '--config.file=/etc/prometheus/prometheus.yml'
  #     - '--storage.tsdb.path=/prometheus'
  #     - '--web.console.libraries=/etc/prometheus/console_libraries'
  #     - '--web.console.templates=/etc/prometheus/consoles'
  #     - '--storage.tsdb.retention.time=1d'
  #     - '--web.enable-lifecycle'

  # --------------------------------------------------------------------------------
  # Uncomment to expose the database and the message bus outside of Docker Compose
  # --------------------------------------------------------------------------------
  # database:
  #   ports:
  #     - "7474:7474"
  #     - "7687:7687"
  # message-queue:
  #   ports:
  #     - "5672:5672"
  #     - "15672:15672"

volumes:
  prometheus_data: