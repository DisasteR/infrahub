---
name: from-netbox
source:
  name: netbox
  settings:
    url: "https://demo.netbox.dev"
    token: "922b451617b0985f5f3323ed7550f2697f520b71"

destination:
  name: infrahub
  settings:
    url: "http://localhost:8000"

order: ["tag", "location", "role", "rack"]

schema_mapping:
  - name: tag
    mapping: extras.tags
    fields:
      - name: name
        mapping: name
        identifier: true
      - name: description
        mapping: description

  - name: location
    mapping: dcim.sites
    fields:
      - name: name
        mapping: slug
      - name: description
        mapping: description
      - name: type
        static: "SITE"

  - name: rack
    mapping: dcim.racks
    identifiers: ["location", "name"]
    fields:
      - name: name
        mapping: name
      - name: description
        mapping: description
      - name: location
        mapping: site.slug
      - name: height
        mapping: u_height
      - name: tags
        reference:
          mapping: tags

  - name: role
    mapping: dcim.device_roles
    fields:
      - name: name
        mapping: name
      - name: description
        mapping: description

  - name: role
    mapping: dcim.rack_roles
    fields:
      - name: name
        mapping: name
      - name: description
        mapping: description

  - name: role
    mapping: ipam.roles
    fields:
      - name: name
        mapping: name
      - name: description
        mapping: description
